!function(t,e){t((function(){t.fn.select2&&t(".rtcl-select2").select2(),t.fn.wpColorPicker&&t(".rtcl-color").wpColorPicker(),t.fn.rtFieldDependency&&t("[data-rt-depends]").rtFieldDependency();var r=t(".rtcl-setting-image-wrap");r.on("click",".rtcl-add-image",(function(e){e.preventDefault();var r,n,a=t(this).parents(".rtcl-setting-image-wrap");void 0===r?((r=wp.media.frames.file_frame=wp.media({frame:"post",state:"insert",multiple:!1})).on("insert",(function(){if(n=r.state().get("selection").first().toJSON(),!(0>t.trim(n.url.length))){var e=void 0===n.sizes.medium?n.url:n.sizes.medium.url;a.find(".rtcl-setting-image-id").val(n.id),a.find(".image-preview-wrapper").html('<img src="'+e+'" alt="'+n.title+'" />'),a.find(".rtcl-add-image").trigger("rtclImageChangeEvent",[e])}})),r.open()):r.open()})),e.rtclSettingsImageConfirm=!1,r.on("click",".rtcl-remove-image",(function(r){r.preventDefault();var n=t(this).parents(".rtcl-setting-image-wrap");e.rtclSettingsImageConfirm=confirm("Are you sure to delete?"),rtclSettingsImageConfirm&&(n.find(".rtcl-setting-image-id").val(""),n.find(".image-preview-wrapper img").attr("src",n.find(".image-preview-wrapper").data("placeholder")))}));var n=t("#rtcl_account_settings-user_verification");n.is(":checked")&&t(".rtcl_account_settings-verify_max_resend_allowed").show("slow"),n.on("change",(function(){t(this).is(":checked")?t(".rtcl_account_settings-verify_max_resend_allowed").show("slow"):t(".rtcl_account_settings-verify_max_resend_allowed").hide("slow")}));var a=t("#rtcl_account_settings-enable_terms_conditions");a.is(":checked")&&t(".rtcl_account_settings-terms_conditions").show("slow"),a.on("change",(function(){t(this).is(":checked")?t(".rtcl_account_settings-terms_conditions").show("slow"):t(".rtcl_account_settings-terms_conditions").hide("slow")}))})),t(".rtcl-license-wrapper").on("click",".rt-licensing-btn",(function(e){e.preventDefault();var r=t(this),n=r.closest("td"),a=r.data("action"),i=r.hasClass("license_activate")?"license_activate":"license_deactivate";a?t.ajax({type:"POST",url:ajaxurl,data:{action:a,type:i,__rtcl_wpnonce:rtclObj.rtcl_nonce},beforeSend:function(){n.rtclBlock()},success:function(t){n.rtclUnblock(),t.error?t.msg&&toastr.error(t.msg):(r.text(t.value).removeClass(i).addClass(t.type),"license_deactivate"===t.type?r.removeClass("button-primary").addClass("danger"):"license_activate"===t.type&&r.removeClass("danger").addClass("button-primary"),toastr.success(t.msg)),r.blur()},error:function(t,e){n.rtclUnblock(),0===t.status?toastr.error("","Not connect.\n Verify Network."):404===t.status?toastr.error("","Requested page not found. [404]"):500===t.status?toastr.error("","Internal Server Error [500]."):"parsererror"===e?toastr.error("","Requested JSON parse failed."):"timeout"===e?toastr.error("","Time out error."):"abort"===e?toastr.error("","Ajax request aborted."):toastr.error("","Uncaught Error.\n"+t.responseText)}}):toastr.error("","Action not defined!!")})),t(".rtcl-admin-main-settings ul.nav-tab-wrapper").on("click","li.have-sub-item a.nav-tab",(function(e){e.preventDefault();var r=t(this).closest("li.have-sub-item"),n=r.find("ul.sub-settings");r.toggleClass("nav-open"),n.stop(!0,!0).slideToggle(500)})),t(".rtcl-tax-rate-settings-wrap").on("click",".rtcl-add-tax-row",(function(e){e.preventDefault();var r=t(this).closest(".rtcl-tax-rate-settings-wrap").find("table.rtcl-tax-rate-settings-table").find("tbody"),n=r.find("tr:first-child").clone();n.find("td").each((function(){var e=t(this);e.find("input").val(""),e.hasClass("rate")?e.find("input").attr("placeholder",0):e.hasClass("name")?e.find("input").attr("placeholder","Tax"):e.hasClass("priority")?e.find("input").attr("placeholder",1):e.find("input").attr("placeholder","*")})),r.append(n)})),t("table.rtcl-tax-rate-settings-table tbody").on("click","tr",(function(){t(this).toggleClass("selected")})),t("table.rtcl-tax-rate-settings-table").on("click",".rtcl-remove-tax-row",(function(e){e.preventDefault();var r=t(this).closest("table.rtcl-tax-rate-settings-table"),n=r.find("tbody tr"),a=r.find("tbody tr.selected");if(n.length>1){var i=[];a.each((function(){i.push(parseInt(t(this).attr("data-id")))})),t.ajax({type:"POST",url:ajaxurl,data:{action:"rtcl_tax_remove_record",data:i,__rtcl_wpnonce:rtclObj.rtcl_nonce},beforeSend:function(){r.rtclBlock()},success:function(e){r.rtclUnblock(),e.error?e.msg&&console.log(e.msg):a.each((function(){t(this).remove()}))},error:function(t,e){r.rtclUnblock()}})}})),t("table.rtcl-tax-rate-settings-table").on("keyup",'input[name^="rtcl_tax_rate_country"]',(function(){var e=t(this),r=e.closest(".rtcl-tax-rate-settings-wrap").find("ul.rtcl-country-list").find("li"),n=e.val(),a=t("<ul></ul>");n?(n=n.toLowerCase(),e.closest("td.country").find("ul").remove(),e.closest("td.country").append(a),r.each((function(r){var a=t(this);if(-1===a.text().toLowerCase().indexOf(n))a.hide();else{var i=a.show().clone();setTimeout((function(){i.appendTo(e.closest("td.country").find("ul"))}),200)}}))):(r.show(),t(this).closest("td").find("ul").remove())})),t("table.rtcl-tax-rate-settings-table").on("click","td.country ul li",(function(){var e=t(this),r=e.closest("tr"),n=r.find("td.country"),a=r.find("td.state"),i=n.find("input"),s=e.attr("data-country-code");i.val(s),i.focus(),n.find("ul").remove(),t.ajax({type:"POST",url:ajaxurl,data:{action:"rtcl_tax_country_state",country_code:s,__rtcl_wpnonce:rtclObj.rtcl_nonce},beforeSend:function(){r.rtclBlock()},success:function(n){if(r.rtclUnblock(),n.error)n.msg&&console.log(n.msg);else{var i=t("<ul></ul>");a.find("ul").remove(),a.find("input").val(""),a.append(i),setTimeout((function(){t.each(n.data,(function(e,r){t("<li/>").attr("data-state",e).text(r).appendTo(i)}))}),500),a.find("ul").hide()}e.blur()},error:function(t,e){r.rtclUnblock()}})})),t("table.rtcl-tax-rate-settings-table").on("keyup",'input[name^="rtcl_tax_rate_state"]',(function(){var e=t(this),r=e.closest("tr").find("td.state").find("ul"),n=r.find("li"),a=e.val();a&&(r.show(),a=a.toLowerCase(),n.each((function(e){var r=t(this);-1===r.text().toLowerCase().indexOf(a)?r.hide():r.show()})))})),t("table.rtcl-tax-rate-settings-table").on("click","td.state ul li",(function(){var e=t(this),r=e.closest("tr").find("td.state"),n=r.find("input"),a=e.attr("data-state");n.val(a),n.focus(),r.find("ul").hide()}))}(jQuery,window);
