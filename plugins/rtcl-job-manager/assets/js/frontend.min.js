!function(e){e(document).ready((function(){e.validator.addMethod("minAge",(function(e,a,t){var r=new Date(e),n=new Date,o=n.getFullYear()-r.getFullYear(),l=n.getMonth()-r.getMonth();return(l<0||0===l&&n.getDate()<r.getDate())&&o--,o>=t})),e.validator.addMethod("maxAge",(function(e,a,t){var r=new Date(e),n=new Date,o=n.getFullYear()-r.getFullYear(),l=n.getMonth()-r.getMonth();return(l<0||0===l&&n.getDate()<r.getDate())&&o--,o<=t}),"You must be at most 40 years old."),console.log(rtclJobManager.validation),e("#rtcl-job-application-form").validate({rules:{first_name:{required:!0},birth_date:{required:!0,date:!0,minAge:15,maxAge:45},email:{required:!0,email:!0},phone:{required:!0,pattern:/^(\+?\d{1,4}[-\s]?)?(\(?\d{3}\)?[-\s]?)?\d{3}[-\s]?\d{4}$/},website:{url:!0},resume:{required:!0,extension:"pdf|PDF"}},messages:{first_name:{required:rtclJobManager.validation.first_name.required},birth_date:{required:rtclJobManager.validation.birth_date.required,minAge:rtclJobManager.validation.birth_date.minAge,maxAge:rtclJobManager.validation.birth_date.maxAge},email:{required:rtclJobManager.validation.email.required,email:rtclJobManager.validation.email.email},phone:{required:rtclJobManager.validation.phone.required,pattern:rtclJobManager.validation.phone.pattern},website:{url:rtclJobManager.validation.website.url},resume:{required:rtclJobManager.validation.resume.required,extension:rtclJobManager.validation.resume.extension}},submitHandler:function(a,t){t.preventDefault();var r=e(a),n=r.find("input[type=submit]"),o=r.find(".rtcl-response"),l=e("<div class='alert'></div>"),i=new FormData(a),s=r.find(".rtcl-form-group-wrap");i.append("action","rtcl_job_submission"),i.append("nonce",rtclJobManager.nonce),e.ajax({url:rtclJobManager.ajaxurl,type:"POST",data:i,processData:!1,contentType:!1,beforeSend:function(){o.addClass("rtcl-loading"),n.prop("disabled",!0),o.html(""),e('<span class="rtcl-icon-spinner animate-spin"></span>').insertAfter(n)},success:function(e){n.prop("disabled",!1).next(".rtcl-icon-spinner").remove(),r.removeClass("rtcl-loading"),r.closest(".rtcl-job-application-container").addClass("submit-successfully"),e.success?(r[0].reset(),l.removeClass("alert-danger").addClass("alert-success").html(e.data.message).appendTo(o),s.slideUp()):(l.removeClass("alert-success").addClass("alert-danger").html(e.data.error).appendTo(o),console.log(e.data.error))},error:function(e){console.log(e),l.removeClass("alert-success").addClass("alert-danger").html(e.responseText).appendTo(o),n.prop("disabled",!1).next(".rtcl-icon-spinner").remove(),r.removeClass("rtcl-loading")}})}}),e("#rtcl-job-apply-btn").on("click",(function(a){a.preventDefault();var t=e(".rtcl-job-application-container"),r=e("#rtcl-job-form-trigger").offset().top-100;e("html, body").animate({scrollTop:r},800),t.slideDown()})),e("#rtcl-job-location").on("change",(function(a){var t=e(this),r=t.parent(),n=t.next(".sub-location"),o=t.val();e.ajax({url:rtclJobManager.ajaxurl,type:"POST",data:{action:"rtclJobLocationChange",location:o},beforeSend:function(){r.addClass("loading"),n.html("")},success:function(e){r.removeClass("loading"),e&&(n.html(e),console.log(e))},error:function(e){r.removeClass("loading"),console.log(e)}})}))}))}(jQuery);
