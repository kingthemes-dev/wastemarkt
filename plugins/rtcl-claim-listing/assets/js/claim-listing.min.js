!function(e){e(document).ready((function(){e(".rtcl-claim-document-wrap .rtcl-media-action").on("click","span.add",(function(){var t=e(this),c=e("<input type='file' style='position:absolute;left:-9999px' />");e("body .rtcl-claim-listing-form").append(c),navigator.userAgent.match(/MSIE ([0-9]+)\./)?c.trigger("change"):c.trigger("click"),c.on("change",(function(){var c=e(this),l=t.parents(".rtcl-claim-document"),a=e(".other-document",l),n=c[0].files[0],r=parseInt(rtcl_claim.max_file_size);"application/pdf"===n.type?n.size<=r?(l.addClass("has-file"),l.removeClass("no-file"),a.html("<span class='rtcl-document-name'>"+n.name+"</span><span class='rtcl-doc-remove' title='"+rtcl_claim.remove_text+"'><i class='rtcl-icon rtcl-icon-cancel'></i></span>")):alert(rtcl_claim.error_file_size):alert(rtcl_claim.error_extension)}))})),e(".rtcl-claim-document-wrap .other-document").on("click","span.rtcl-doc-remove",(function(){var t=e(this).parents(".rtcl-claim-document"),c=e(".other-document",t);confirm(rtcl_claim.confirm_text)&&(t.addClass("no-file"),t.removeClass("has-file"),c.html(""),t.closest(".rtcl-claim-listing-form").find("input[type=file]").remove())})),e(document).on("submit",".rtcl-claim-listing-form",(function(t){t.preventDefault();var c=e(this),l=c.closest(".rtcl-claim-listing-wrapper"),a=e("<div class='alert rtcl-response'></div>"),n=l.find("form"),r=new FormData(this),s=c.find("input[type=file]");if(s.length){var i=s[0].files[0];r.append("document",i)}r.append("rtcl_wpnonce",rtcl.__rtcl_wpnonce),r.append("action","rtcl_claim_form_submit"),e.ajax({url:rtcl_claim.ajax_url,data:r,cache:!1,contentType:!1,processData:!1,type:"POST",beforeSend:function(){n.find(".alert.rtcl-response").remove(),n.find("button[type=submit]").prop("disabled",!0),n.rtclBlock()},success:function(e){n.rtclUnblock(),e.success?a.removeClass("alert-danger").addClass("alert-success").html(e.message).appendTo(n):(n.find("button[type=submit]").prop("disabled",!1),a.removeClass("alert-success").addClass("alert-danger").html(e.message).appendTo(n))},error:function(e,c,l){a.removeClass("alert-success").addClass("alert-danger").html(t.responseText).appendTo(n),n.find("button[type=submit]").prop("disabled",!1),n.rtclUnblock()}})}))}))}(jQuery);
